<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>/Users/sentelljg/working_folder/ACE/app/ACE/www/js/ModalHandler.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/AppController.html">AppController</a></li>
            
                <li><a href="../classes/LoginController.html">LoginController</a></li>
            
                <li><a href="../classes/MapController.html">MapController</a></li>
            
                <li><a href="../classes/ModalHandler.html">ModalHandler</a></li>
            
                <li><a href="../classes/ReportController.html">ReportController</a></li>
            
                <li><a href="../classes/WeatherReport.html">WeatherReport</a></li>
            
                <li><a href="../classes/WorkspaceController.html">WorkspaceController</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/starter.controllers.html">starter.controllers</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: /Users/sentelljg/working_folder/ACE/app/ACE/www/js/ModalHandler.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
// ModalHandler.js

// ModalHandler
//-----------------------------------------------------------------------------------

// Class handles functionality related to modals in the reporting section

// Empty constructor
/**
 * @class ModalHandler
 * @constructor
 */
var ModalHandler = function() {};

/**
 * Static unselected color value
 * 
 * @property unselectedColor
 * @type string
 * @default &quot;transparent&quot;
 */
ModalHandler.prototype.unselectedColor = &quot;transparent&quot;;

/**
 * Static selected color value
 * 
 * @property selectedColor
 * @type string
 * @default &quot;rgb(149, 206, 226)&quot;
 */
ModalHandler.prototype.selectedColor = &quot;rgb(149, 206, 226)&quot;;


// Returns all &quot;selectable&quot; items in the current modal
/**
 * @method getSelectable
 * @description Returns all &quot;selectable&quot; items in the current modal
 * @param {HTML Document} htmlDoc The &quot;document&quot; variable from the current scope
 * @return {array} An array of all the elements in the current ui that are members
 *          of the &quot;selectable&quot; class.  This should be used for situations when the
 *          user selects from multiple pre-defined options listed as a grid of icons.
 * @throws none
 */
ModalHandler.prototype.getSelectable = function(htmlDoc) {
	return htmlDoc.getElementsByClassName(&quot;selectable&quot;);
};

// Resets (changes to the unselected color) all the backgrounds of elements that are members of the
// &quot;selectable class&quot;
/**
 * @method resetSelectableBackgrounds
 * @description
 * @param {HTML Document} htmlDoc The &quot;document&quot; variable from the current scope
 * @return void
 * @throws none
 */
ModalHandler.prototype.resetSelectableBackgrounds = function(htmlDoc) {
	var divArray = this.getSelectable(htmlDoc);
	for(var i = 0; i &lt; divArray.length; i++)
	{
		divArray[i].style.backgroundColor = this.unselectedColor;
	}
};

// Sets a new temporary (unsaved) selection on a modal.  Handles background recoloring.
/**
 * @method setNewTempSelection
 * @description
 * @param {HTML Document} htmlDoc The &quot;document&quot; variable from the current scope
 * @param {ionicModal} modal The app modal that the selection was performed on
 * @param {string} id The id of the element that was selected.
 */
ModalHandler.prototype.setNewTempSelection = function(htmlDoc, modal, id) {
    // Grab the selected element
	var selectedElement = htmlDoc.getElementById(id);
    
    // Check previous selections (temporary or saved)
	if((modal.temp &amp;&amp; modal.temp === id) || (modal.selection &amp;&amp; modal.selection === id))
	{
        // If selectedElement is the same as the previously selected element, deselect it
		modal.temp = &quot;&quot;;
		selectedElement.style.backgroundColor = this.unselectedColor;
	}
	else
	{
        // If any other element was previously (temporarily) selected, reset its background color
        if(modal.temp &amp;&amp; modal.temp !== &quot;&quot;)
        {
            htmlDoc.getElementById(modal.temp).style.backgroundColor = this.unselectedColor;
        }        
        
        // Save new temp selection
        modal.temp = id;
        
        // Update ui to new selected item
		selectedElement.style.backgroundColor = this.selectedColor;
	}
};

// Sets up any previsouly selected items from a modal (sets the background of the element indicated by &quot;id&quot; to
// the selected color).
/**
 * @method setPreviousSelection
 * @description
 * @param {HTML Document} htmlDoc The &quot;document&quot; variable from the current scope
 * @param {string} id The id of any previously selected element
 * @return void
 * @throws none
 */
ModalHandler.prototype.setPreviousSelection = function(htmlDoc, id) {
    // If the id is valid...
    if(id !== &quot;&quot;)
    {
        // Set background color to &quot;selected&quot;
        htmlDoc.getElementById(id).style.backgroundColor = this.selectedColor;
    }
};

// Opens a modal and handles setting up any selectable items
/**
 * @method openModal
 * @description
 * @param {HTML Document} htmlDoc the &quot;document&quot; variable from the current scope
 * @param {ionicModal} The app modal to be opened.
 * @return void
 * @throws none
 */
ModalHandler.prototype.openModal = function(htmlDoc, modal)
{
    // If anything was previously selected...
    if(modal.selection)
    {
        // Set it as selected currently
        this.setPreviousSelection(htmlDoc, modal.selection);
    }
    else
    {
        // Otherwise, clear all backgrounds to the unselected color (takes care of any un-recycled view elements)
        this.resetSelectableBackgrounds(htmlDoc);
    }
    
    // Actually display the modal
    modal.show();
};

// Performs &quot;Save&quot; functionality for the specified modal.  
/**
 * @method saveModal
 * @param {HTML Document} htmlDoc The &quot;document&quot; variable from the current scope.
 * @param {ionicModal} modal The modal to save.
 * @param {string} summaryElementId The id of the element to display the summary information in
 * @param {function} convertFunction The function that specifies how to convert the selected element id (in modal.temp)
 *          to the actual report value.
 * @param {function} formatSummaryText The function that handles formatting the summary field
 * @param {boolean} summaryDifferent OPTIONAL parameter that indicates whether the summary field should be different from
 *          what was saved into the report.
 */
ModalHandler.prototype.saveModal = function(htmlDoc, modal, summaryElementId, convertFunction, formatSummaryText, summaryDifferent) {
    // Save the selection to the modal permanent variable
    modal.selection = modal.temp;
    
    // Update the reportField with the passed formatting funcion
    var reportField = convertFunction(modal.selection);
    
    // Grab a reference to the summary element
    var summary = htmlDoc.getElementById(summaryElementId);
    
    // If the summary is flagged as different than the reportField value...
    if(summaryDifferent)
    {
        // Set it with its own provided formatting function
        summary.innerText = formatSummaryText(reportField);
    }
    else
    {
        // Otherwise, set the summary text to the same as the report field
        if(reportField &amp;&amp; reportField !== &quot;&quot;)
        {
            summary.innerText = reportField;
        }
        else
        {
            // If no value was selected, re-display the blank &quot;_____&quot; that indicates no value selected
            summary.innerText = &quot;______&quot;;
        }
    }
    
    // Hide the modal
    modal.hide();
    
};
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
